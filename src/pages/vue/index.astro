---
import Layout from '../../layouts/Layout.astro'
---

<script>
  const messages = []
  const socket = new WebSocket(
    'ws://8.140.205.94:30002/major-hazard/websocket/1'
  )
  socket.addEventListener('open', () => {
    console.log('WebSocket连接已打开')
    // 可以在这里发送初始消息，如：
    socket.send('Hello, Server!')
  })
  socket.addEventListener('message', (event) => {
    messages.push(event.data)
    console.log('message', messages)
  })
  socket.addEventListener('close', () => {
    console.log('WebSocket连接已关闭')
  })
  socket.addEventListener('error', (error) => {
    console.error('WebSocket错误:', error)
  })
</script>
<Layout title='vue'>
  <main>
    {Array.from({ length: 100 }).map((v) => <div>vue</div>)}
  </main>
</Layout>
