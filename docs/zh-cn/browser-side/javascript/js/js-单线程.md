## JavaScript 单线程模型 <!-- {docsify-ignore} -->

**文档更新日期: {docsify-updated}**



### 含义

单线程模型指的是，JavaScript只在一个线程上运行。

如果有一个任务特别耗时，后面的任务都会停在那里等待，造成浏览器失去响应，又称“假死”。为了避免“假死

当某个操作在一定时间后仍无法结束，浏览器就会跳出提示框，询问用户是否要强行停止脚本运行。

---



#### 消息队列

JavaScript运行时，除了一个运行线程，引擎还提供一个消息队列（message queue），里面是各种需要当前程序处理的消息

新的消息进入队列的时候，会自动排在队列的尾端。

**运行线程只要发现消息队列不为空，就会取出排在第一位的那个消息，执行它对应的回调函数**

进入消息队列的消息，必须有对应的回调函数。否则这个消息就会遗失，不会进入消息队列。

`setTimeout`会在指定时间向消息队列添加一条消息:如果消息队列之中，此时没有其他消息，这条消息会立即得到处理；否则，这条消息会不得不等到其他消息处理完，才会得到处理。

!> `setTimeout`指定的执行时间，只是一个最早可能发生的时间，并不能保证一定会在那个时间发生

一旦当前执行栈空了，消息队列就会取出排在第一位的那条消息，传入程序。程序开始执行对应的回调函数，等到执行完，再处理下一条消息。





---

